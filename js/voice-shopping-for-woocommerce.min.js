window.onload=e=>{!function(){"use strict";let e="click",t=void 0!==wcva.wcvaDisableSearchMic&&"1"==wcva.wcvaDisableSearchMic,i=void 0!==wcva.wcvaDisableFormsMic&&"1"==wcva.wcvaDisableFormsMic;function n(){try{window.wcvaMicTimeoutIdentifier&&(clearTimeout(window.wcvaMicTimeoutIdentifier),window.wcvaMicTimeoutIdentifier=null)}catch(e){}}function a(){try{if(!1===wcvaClientInfo.ios)return!1;window.wcvaIosMicTimeoutIdentifier&&(clearTimeout(window.wcvaIosMicTimeoutIdentifier),window.wcvaIosMicTimeoutIdentifier=null)}catch(e){}}function l(){try{window.wcvaBotTimeoutIdentifier&&(clearTimeout(window.wcvaBotTimeoutIdentifier),window.wcvaBotTimeoutIdentifier=null,z.classList.remove("responding"),_.classList.remove("responding"))}catch(e){}}function c(e,t,i=!1){try{let n=e.classList||null,a=t.classList||null;if(!(n&&a))return!1;!0===i?(n.add("wcva-hide-element"),a.remove("wcva-hide-element")):(n.remove("wcva-hide-element"),a.add("wcva-hide-element"))}catch(l){}}n(),a(),wcvaTypeOfSearch=void 0!==wcva.wcvaTypeOfSearch&&null!==wcva.wcvaTypeOfSearch?wcva.wcvaTypeOfSearch:"native";let o=["Ask about our company","Ask for opening hours"];(wcvaSearchableHints="undefined"!=typeof wcvaSearchableHints&&null!==wcvaSearchableHints?wcvaSearchableHints:o).constructor!==Array&&(wcvaSearchableHints=[]),0==wcvaSearchableHints.length&&(wcvaSearchableHints=o);let r=null;function s(e){try{null!=e&&!1!=e&&clearInterval(e)}catch(t){}}function d(e){return isNaN(e=parseInt(e,10))||null==e?0:e}function u(e=null,t=null){let i=!1;try{let n=document.querySelectorAll("button.voice-shopping-for-woocommerce-button");if(null==n||null==e)return i;let a=n.length;for(let l=0;l<a;l++){let c=n[l].className,o=n[l].getAttribute("id");if(void 0!==c&&""!=c.trim()&&-1!=c.indexOf("listening")&&e!=o){i=!0;break}}if(!1==i&&null===t){let r=document.querySelector("#wcvaWidgetMic");null!==r&&-1!=r.className.indexOf("listening")&&(i=!0)}}catch(s){i=!1}return i}function p(){let e="Ask about us.";try{let t=wcvaSearchableHints.length,i=wcvaSearchableHints[Math.floor(Math.random()*t)];void 0!==i&&""!=i.trim()&&(e=i)}catch(n){e="Ask about us."}return e}r=(r=(r=void 0!==wcva.wcvaMicListenTimeoutDuration&&null!==wcva.wcvaMicListenTimeoutDuration?isNaN(r=parseInt(wcva.wcvaMicListenTimeoutDuration))?8:r:8)<8?8:r)>20?20:r,r*=1e3;let v=document.querySelector("div#search-outer form input[type=text]"),w=document.querySelector("div#mobile-menu form input[type=text]");null!==v&&v.setAttribute("data-wcva-top-search-bar","true"),null!==w&&w.setAttribute("data-wcva-mobile-search-bar","true");let m=document.querySelectorAll("form"),f=["text","email","search"],g=null,h=null;[].forEach.call(m,function(l,o){try{let s=l.getAttribute("style");s=null!=s&&""!=s.trim()?s+";":"",l.setAttribute("style",s+"display: block !important"),l.classList.add("wcva-sanitize-form-wrapper");let v=!1;var w=!1;let m=l.getAttribute("role")||"",b=l.classList||"",$=l.querySelectorAll('input:not([type=hidden]):not([id=wcvaWidgetSearch]):not([style*="none"]), button[type=submit], textarea:not([style*="none"]');("search"===m.toLowerCase()||b.contains("searchform")||b.contains("search_form")||b.contains("search-form")||b.contains("searchForm"))&&(v=!0),v&&!g&&(g=l),[].forEach.call($,function(m,g){let b=null,$=m.getAttribute("type")||"",y=m.className||"",A=m.getAttribute("id")||null,L=m.tagName;A&&null!==A&&(A=A.toLowerCase()),y&&null!==y&&(y=y.toLowerCase());let C=!1;(-1!==y.indexOf("datepicker")||-1!==y.indexOf("date")||"datepicker"===A||"date"===A)&&(C=!0),-1===y.indexOf("datepicker")&&"datepicker"!==A&&-1!==y.search(/validat|candidat/ig)&&(C=!1),"text"===$&&-1!==y.search(/email/ig)&&($="email");let _="textarea"===L.toLowerCase();if(f.includes($)&&!1==C||!0==_)b=m;else if("submit"==$.toLowerCase()&&(!t||!i)){if(v&&!t){let T=m.querySelectorAll("img, svg");for(let E=0;E<T.length;E++)T[E].classList.add("wcva-hide-element")}l.addEventListener("submit",function(e){if(!0==w)return e.preventDefault(),!1;if(!0===v&&!t)try{if("native"!=wcvaTypeOfSearch){if(e.preventDefault(),!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey))return wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play(),!1;if(!wcvaClientInfo.android){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.basic),wcvaIntentResponsePlayer.play();let i=this.querySelector("input.wcv-assistant-mic-band"),n=i?i.value:"";wcvaSendDialog(n,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{l.submit()}catch(e){console.log("WCVA: Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()})}}}catch(a){console.log("WCVA Exception: Unable to submit the form due to: "+a.message)}},!1)}if(null===b)return!0;if(!1==wcvaIsInputFieldMic){var M=b.placeholder;if(!0==M.includes("{allow_stt}"))b.placeholder=M.replace("{allow_stt}","");else if(!1!=t||!0!=v)return!0}else{var M=b.placeholder;!0==M.includes("{allow_stt}")&&(b.placeholder=M.replace("{allow_stt}",""))}if(v){if(h||(h=b),t)return!1}else if(i)return!1;let x=document.createElement("button");x.setAttribute("type","button"),x.setAttribute("class","voice-shopping-for-woocommerce-button"),x.setAttribute("id","voice-shopping-for-woocommerce-button"+o+g);let k=document.createElement("img");k.setAttribute("src",wcva.wcvaImagesPath+"wcva-mic.svg"),k.setAttribute("class","wcva-mic-image"),k.setAttribute("id","wcva-mic-img"+o+g),x.appendChild(k);let I=document.createElement("img");!0===wcvaClientInfo.ios&&(I.setAttribute("src",wcva.wcvaImagesPath+"wcva-mic-stop.svg"),I.setAttribute("class","wcva-stop-alert wcva-hide-element"),I.setAttribute("id","wcva-mic-stop"+o+g),x.appendChild(I));let H=d(b.offsetHeight),P=b.getAttribute("data-wcva-top-search-bar"),S=b.getAttribute("data-wcva-mobile-search-bar"),B=!1,W=!1;null!=P&&""!=P.trim()&&(B=!0,0==H&&(H=59)),null!=S&&""!=S.trim()&&(W=!0);let D=d(.8*H);0==d(D)&&(H=D=35);let N=d(.1*H);(!0==W||!0==B)&&(N+=20),!0===_&&(N=10,D=35);let K="top: "+N+"px; ";K+="height: "+D+"px !important; ",K+="width: "+D+"px !important; ",K+="z-index: 999 !important; margin-left: 3px !important; border-radius: 50% !important; border: 2px solid #ffff !important;",x.setAttribute("style",K);let X=document.createElement("div");X.setAttribute("style",s+"display: inline-block !important");let R=window.getComputedStyle(b);X.setAttribute("class","wcv-assistant-mic-band"),X.setAttribute("onclick","return false"),X.style.width=R.width,b.insertAdjacentElement("beforebegin",X);let q=b.parentNode.nodeName;null!=q&&0!=q.length&&(q=q.toLowerCase(),"form"!=q&&(b.parentNode.style.zIndex=1)),X.appendChild(b),b.insertAdjacentElement("beforebegin",x),b.setAttribute("style",s+"width: 100% !important"),b.classList.add("wcv-assistant-mic-band"),l.setAttribute("style",s);let O="",F;if(!0==B&&x.addEventListener("mousedown",function(e){return e.preventDefault(),!0},!1),"webkitSpeechRecognition"in window&&!0===wcvaClientInfo.chrome){let V=new webkitSpeechRecognition;function j(){if(w=!1,!F){if(x.classList.remove("listening"),x.style.setProperty("color","white"),!0===v){let e=wcvaAlternativeResponse.randomLib;wcvaIntentResponsePlayer.configure(e[Math.floor(10*Math.random())],function(){t()}),wcvaIntentResponsePlayer.play()}else t()}function t(){if(void 0!==O&&0!=O.length){let e=O;"email"===$&&(e=wcvaFormatEmail(e));let t=e&&null!==e?e:O;!0===_?b.value+=" "+t:b.value=t,!0===v&&wcvaSendDialog(O,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{l.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()})}else b.placeholder=wcvaMessages.ask}}V.continuous=!0,V.interimResults=!0,V.onstart=function(){w=!0},V.onerror=function(e){x.classList.remove("listening"),w=!1,"no-speech"==e.error&&(b.placeholder=wcvaMessages.unableToHear,wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),F=!0),"audio-capture"==e.error&&(b.placeholder=wcvaMessages.micNotAccessible,F=!0),"not-allowed"==e.error&&(b.placeholder=wcvaMessages.browserDenyMicAccess,x.style.setProperty("color","white"),F=!0)},V.onend=function(){wcvaClientInfo.android&&j()},V.onresult=function(e){let t="";if(void 0===e.results){V.onend=null,V.stop(),b.placeholder=wcvaMessages.unableToHear,wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.micConnect),wcvaIntentResponsePlayer.play();return}let i=e.results.length;for(let n=e.resultIndex;n<i;++n)e.results[n].isFinal?(O=e.results[n][0].transcript,!1==wcvaClientInfo.android&&(j(),V.stop())):!1===_&&(t+=e.results[n][0].transcript,b.value=t)},x.addEventListener(e,function(e){if(!0!==u(x.getAttribute("id"))){if(!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey)){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play();return}w?(n(),!0===v&&(b.placeholder=p()),!1==wcvaClientInfo.android&&(j(),V.stop())):(!0===v&&(b.placeholder=p()),x.classList.add("listening"),e.preventDefault(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),O="",!1===_&&(b.value=""),w=!0,V.lang=wcvaSttLanguageContext.gcp.stt?wcvaSttLanguageContext.gcp.langCode:"en-US",V.start(),F=!1,n(),window.wcvaMicTimeoutIdentifier=setTimeout(function(){let e=x.classList;e&&e.contains("listening")&&x.click()},"textarea"==b.tagName.toLowerCase()?2e4:r))}})}else x.addEventListener(e,function(e){function t(){if(!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey))return wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play(),!1;if(w){if(n(),!0===wcvaClientInfo.ios){a();k.classList.contains("wcva-hide-element")&&c(k,I)}wcvaAudioRecorder.stop(),wcvaStopAudio(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),x.classList.remove("listening"),x.style.setProperty("color","white"),b.placeholder=wcvaMessages.transcribeText,wcvaAudioRecorder.getBuffers(function(e){wcvaSttLanguageContext.gcp.stt?wcvaAudioRecorder.exportMonoWAV(function(e){wcvaAudioRecorder.convertBlobToBase64(e).then(function(e){wcvaGcpStt(e).then(function(e){if(void 0!==e&&0!=e.length){let t=e;"email"===$&&(t=wcvaFormatEmail(t));let i=t&&null!==t?t:e;!0===_?b.value+=" "+i:b.value=i,!0===v&&wcvaSendDialog(e,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{l.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()})}else wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),b.placeholder=wcvaMessages.ask})}).catch(function(e){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),b.placeholder=wcvaMessages.ask})}):(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),b.placeholder=wcvaMessages.ask)}),w=!1;return}if(!0===v&&(b.placeholder=p()),x.classList.add("listening"),e.preventDefault(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),O="",!1===_&&(b.value=""),w=!0,wcvaAudioRecorder.clear(),wcvaAudioRecorder.record(x,b.tagName),!0===wcvaClientInfo.ios){a();k.classList.contains("wcva-hide-element")||(window.wcvaIosMicTimeoutIdentifier=setTimeout(function(){c(k,I,!0)},4e3))}n(),window.wcvaMicTimeoutIdentifier=setTimeout(function(){let e=x.classList;e&&e.contains("listening")&&x.click()},"textarea"==b.tagName.toLowerCase()?2e4:r)}(!0===wcvaClientInfo.ios||wcvaClientInfo.safari&&!wcvaClientInfo.chrome&&!wcvaClientInfo.firefox&&!wcvaClientInfo.edge||wcvaClientInfo.windows&&wcvaClientInfo.firefox)&&(wcvaIntentResponsePlayer.configure(wcvaSilenceSoundPath),wcvaIntentResponsePlayer.play()),!0!==u(x.getAttribute("id"))&&(wcvaAudioRecorder&&wcvaAudioContext?t():wcvaInitAudio(function(e){if(!wcvaAudioRecorder||!wcvaAudioContext)return alert(wcvaMessages.micNotAccessible),!1;t()}))},!1);x.addEventListener("mouseover",function(e){!0===v&&(x.title=p())})})}catch(y){}});let b=document.createElement("div"),$="wcva-widget-wrapper-middle-right",y="wcva-widget-chat-wrapper-middle-right",A=wcva.wcvaSelectedMicPosition?wcva.wcvaSelectedMicPosition.toLowerCase():"middle right",L="wcva-widget-chat-wrapper-middle-right-collapse";switch(A){case"middle left":$="wcva-widget-wrapper-middle-left",y="wcva-widget-chat-wrapper-middle-left",L="wcva-widget-chat-wrapper-middle-left-collapse";break;case"top right":$="wcva-widget-wrapper-top-right",y="wcva-widget-chat-wrapper-top-right",L="wcva-widget-chat-wrapper-top-right-collapse";break;case"top left":$="wcva-widget-wrapper-top-left",y="wcva-widget-chat-wrapper-top-left",L="wcva-widget-chat-wrapper-top-left-collapse";break;case"bottom right":$="wcva-widget-wrapper-bottom-right",y="wcva-widget-chat-wrapper-bottom-right",L="wcva-widget-chat-wrapper-bottom-right-collapse";break;case"bottom left":$="wcva-widget-wrapper-bottom-left",y="wcva-widget-chat-wrapper-bottom-left",L="wcva-widget-chat-wrapper-bottom-left-collapse";break;default:$="wcva-widget-wrapper-middle-right",y="wcva-widget-chat-wrapper-middle-right",L="wcva-widget-chat-wrapper-middle-right-collapse"}b.setAttribute("class","wcva-widget-wrapper "+$);let C=document.createElement("div");C.setAttribute("class","wcva-widget-chat-wrapper "+L),C.setAttribute("id","wcvaWidgetChatWrapper");let _=document.createElement("div");_.setAttribute("class","wcva-widget-chat-header"),_.setAttribute("id","wcvaWidgetChatHeader");let T=document.createElement("div"),E=wcvaVoiceType.female?"Simone":"Simon";T.setAttribute("class","wcva-widget-chat-option"),T.innerHTML='<div><img class="wcva-widget-chat-option-bot-icon" src="'+wcva.wcvaImagesPath+'Voice Assistant Bot Icon.png"/></div><span class="wcva-widget-agent-name">'+E+'</b></span><br><span class="wcva-widget-agent">Web Virtual Assistant</span>';let M=document.createElement("span");M.setAttribute("class","wcva-expand-window wcva-expand-collapse-handle"),M.setAttribute("title","Click for see all conversions."),M.addEventListener("click",function(){es()},!1);let x=document.createElement("span");x.setAttribute("class","wcva-widget-hide wcva-expand-collapse-handle"),x.setAttribute("title","Close chat window"),x.addEventListener("click",function(){C.classList.remove("wcva-widget-visible")},!1),T.appendChild(M),T.appendChild(x),_.appendChild(T);let k=document.createElement("div");k.setAttribute("id","wcvaWidgetChatConvo"),k.setAttribute("class","wcva-widget-chat-convo wcva-hide-element");let I=document.createElement("span");I.setAttribute("class","wcva-widget-chat-msg-item wcva-widget-chat-msg-item-user");let H=document.createElement("div");H.setAttribute("class","wcva-widget-chat-avatar"),H.innerHTML="<center><b>"+wcvaWidgetMessages.you+"</b></center>",I.appendChild(H);let P=document.createElement("span");I.appendChild(P);let S=document.createElement("span");S.setAttribute("class","wcva-widget-chat-msg-item wcva-widget-chat-msg-item-simon");let B=document.createElement("span");B.setAttribute("class","wcva-widget-chat-msg-item wcva-widget-chat-msg-error");let W=(wcvaVoiceType.female?wcvaWidgetMessages.simonIntro.name+"e":wcvaWidgetMessages.simonIntro.name)+wcvaWidgetMessages.simonIntro.intro+"<br/><br/>",D=wcvaWidgetMessages.simonGuidelines,N=document.createElement("span");N.setAttribute("class","wcva-widget-chat-msg-item wcva-widget-chat-msg-item-simon"),N.innerHTML=W+D,k.appendChild(N);let K=document.createElement("div");K.setAttribute("class","wcva-widget-field");let X=document.createElement("a");X.setAttribute("id","wcvaWidgetMic"),X.setAttribute("class","wcva-widget-button");let R=document.createElement("img");R.setAttribute("id","wcva-widget-mic-img"),R.setAttribute("src",wcva.wcvaImagesPath+"wcva-widget-mic-black.svg"),X.appendChild(R);let q=document.createElement("img");!0===wcvaClientInfo.ios&&(q.setAttribute("src",wcva.wcvaImagesPath+"wcva-mic-stop.svg"),q.setAttribute("class","wcva-stop-alert wcva-hide-element"),q.setAttribute("id","wcva-mic-stop"),X.appendChild(q));let O=document.createElement("a");O.setAttribute("id","wcvaWidgetSearchBtn");let F=document.createElement("button");F.setAttribute("class","wcva-widget-form-submit-btn"),F.setAttribute("type","submit"),F.setAttribute("alt","Go"),F.setAttribute("title","Search"),O.appendChild(F);let V=document.createElement("form");V.setAttribute("class","wcva-widget-form"),null!==g?(V.action=g.action,V.method=g.method):(V.action=wcvaGetCurrentHostURL()+"/",V.method="get");let j=document.createElement("input");j.setAttribute("id","wcvaWidgetSearch"),j.setAttribute("class","wcva-widget-search wcva-widget-search-text"),j.setAttribute("name","wcva-widget-search"),j.setAttribute("placeholder",wcvaWidgetMessages.placeholder),j.setAttribute("name","s"),V.addEventListener("submit",function(e){try{k.removeChild(I)}catch(t){}try{k.removeChild(S)}catch(i){}try{k.removeChild(B)}catch(n){}if("native"!=wcvaTypeOfSearch){if(e.preventDefault(),!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey))return wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play(),!1;0!=j.value.length&&(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.basic),wcvaIntentResponsePlayer.play(),wcvaSendDialog(j.value,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{V.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()},er()))}},!1),V.appendChild(j),V.appendChild(O),K.appendChild(V),C.appendChild(_),C.appendChild(k),C.appendChild(K);let z=document.createElement("a");z.setAttribute("id","wcvaWidgetToggleButton"),z.setAttribute("class","wcva-widget-button wcva-blink-widget-toggle-button");let G=void 0!==wcva.wcvaBotBackgroundColor||null!=wcva.wcvaBotBackgroundColor?wcva.wcvaBotBackgroundColor:"#42a5f5",U=void 0!==wcva.wcvaMicPulseColor||null!=wcva.wcvaMicPulseColor?wcva.wcvaMicPulseColor:"#dc2626",Q=void 0!==wcva.wcvaBotResponseColor||null!=wcva.wcvaBotResponseColor?wcva.wcvaBotResponseColor:"#218c5e",J=document.querySelector(":root");J.style.setProperty("--wcva-bg-color",`${G}`),J.style.setProperty("--wcva-pulse-color",`${U}`),J.style.setProperty("--wcva-bot-response-color",`${Q}`);let Y=document.createElement("span");Y.setAttribute("id","wcvaWidgetPulseEffect");let Z=wcva.wcvaFloatingButtonIcon&&"robotIcon"==wcva.wcvaFloatingButtonIcon?"wcva-toggle-btn-robot":"wcva-toggle-btn-mic",ee=document.createElement("div");function et(e){"add"==e?(z.classList.add("listening"),Y.classList.add("listening"),j.setAttribute("readonly",""),F.setAttribute("disabled",""),j.setAttribute("title","stop mic listening"),ee.classList.add("wcva-toggle-btn-mic"),ee.classList.remove(Z)):"remove"==e&&(z.classList.remove("listening"),Y.classList.remove("listening"),j.removeAttribute("title"),j.removeAttribute("readonly"),F.removeAttribute("disabled"),ee.classList.remove("wcva-toggle-btn-mic"),ee.classList.add(Z))}ee.setAttribute("class","wcva-widget-icon wcva-widget-toggle-button "+Z),ee.setAttribute("id","wcvaWidgetIcon"),z.appendChild(ee),b.appendChild(C),b.appendChild(Y),b.appendChild(z),document.body.insertAdjacentElement("afterend",b),X.addEventListener("mouseover",function(e){X.title=p()}),z.addEventListener("click",function(e){(function e(t=null){null===ed()?(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.simonShortIntro),wcvaIntentResponsePlayer.play(),setTimeout(()=>{localStorage.setItem("wcvaSimonIntroduced",!0)},3e3)):-1!=ee.className.indexOf(Z)&&(N.innerHTML=D,void 0!==k.scrollTop&&void 0!==k.scrollHeight&&(k.scrollTop=k.scrollHeight)),"enable"==t?(es("hide"),ee.classList.add("wcva-widget-visible"),z.classList.add("wcva-widget-float"),C.classList.add("wcva-widget-visible")):(ee.classList.remove("wcva-widget-visible"),z.classList.remove("wcva-widget-float"),C.classList.remove("wcva-widget-visible")),null!==localStorage.getItem("wcvaChatHistory")&&(document.getElementById("wcvaWidgetChatConvo").innerHTML=localStorage.getItem("wcvaChatHistory"))})("enable")}),document.body.onload=function(){let e=localStorage.getItem("wcvaWidgetConversation");if(null!==e){let t=JSON.parse(e),i=t.userQuery||null,n=t.simonResponse||null;null!==i&&null!==n&&(z.classList.remove("wcva-blink-widget-toggle-button"),P.innerHTML=i,S.innerHTML=n,k.appendChild(I),k.appendChild(S),!1===wcvaClientInfo.ios&&z.click()),es()}localStorage.removeItem("wcvaWidgetConversation")};let ei="",en=!1,ea="",el;if("webkitSpeechRecognition"in window&&!0===wcvaClientInfo.chrome){let ec=new webkitSpeechRecognition;function eo(){if(en=!1,el)return;ei=ea,et("remove");let e=wcvaAlternativeResponse.randomLib;wcvaIntentResponsePlayer.configure(e[Math.floor(10*Math.random())],function(){void 0!==ei&&0!=ei.length?(P.innerHTML=ei,k.appendChild(I),j.value=ei,wcvaSendDialog(ei,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{V.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()},er())):j.placeholder=wcvaMessages.ask}),wcvaIntentResponsePlayer.play()}ec.continuous=!0,ec.interimResults=!0,ec.onstart=function(){en=!0},ec.onerror=function(e){et("remove"),en=!1,"no-speech"==e.error&&(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),el=!0,B.innerHTML=wcvaMessages.unableToHear,k.appendChild(B)),"audio-capture"==e.error&&(el=!0,B.innerHTML=wcvaMessages.micNotAccessible,k.appendChild(B)),"not-allowed"==e.error&&(el=!0,B.innerHTML=wcvaMessages.browserDenyMicAccess,k.appendChild(B))},ec.onend=function(){wcvaClientInfo.android&&eo()},ec.onresult=function(e){let t="";if(void 0===e.results){ec.onend=null,ec.stop(),j.placeholder=wcvaMessages.unableToProcess,wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unableToProcess),wcvaIntentResponsePlayer.play();return}let i=e.results.length;for(let n=e.resultIndex;n<i;++n)e.results[n].isFinal?(ea=e.results[n][0].transcript,!1==wcvaClientInfo.android&&(eo(),ec.stop())):t+=e.results[n][0].transcript},z.addEventListener(e,function(e){if(!0!==u(z.getAttribute("id"),z)){if(!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey)){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play();return}if(en)n(),j.placeholder=p(),!1==wcvaClientInfo.android&&(eo(),ec.stop());else{try{k.removeChild(I)}catch(t){}try{k.removeChild(S)}catch(i){}try{k.removeChild(B)}catch(a){}l(),j.placeholder=p(),e.preventDefault(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),null===ed()?(r+=5e3,setTimeout(()=>{l(),P.innerHTML=ei="",en=!0,ec.lang=wcvaSelectedLang,ec.start(),el=!1,et("add")},5e3)):(P.innerHTML=ei="",en=!0,ec.lang=wcvaSelectedLang,ec.start(),el=!1,et("add")),n(),window.wcvaMicTimeoutIdentifier=setTimeout(function(){let e=z.classList;e&&e.contains("listening")&&z.click()},r)}}})}else z.addEventListener(e,function(e){function t(){if(!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey))return wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play(),!1;if(en){if(n(),!0===wcvaClientInfo.ios){a();R.classList.contains("wcva-hide-element")&&c(R,q)}wcvaAudioRecorder.stop(),wcvaStopAudio(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),et("remove"),j.placeholder=wcvaMessages.transcribeText,wcvaAudioRecorder.getBuffers(function(e){wcvaSttLanguageContext.gcp.stt?wcvaAudioRecorder.exportMonoWAV(function(e){wcvaAudioRecorder.convertBlobToBase64(e).then(function(e){wcvaGcpStt(e).then(function(e){void 0!==e&&0!=e.length?(P.innerHTML=e,k.appendChild(I),j.value=e,wcvaSendDialog(e,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{V.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()},er())):(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),j.placeholder=wcvaMessages.ask)})}).catch(function(e){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),j.placeholder=wcvaMessages.ask})}):(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),j.placeholder=wcvaMessages.ask)}),en=!1;return}try{k.removeChild(I)}catch(t){}try{k.removeChild(S)}catch(i){}try{k.removeChild(B)}catch(o){}if(l(),j.placeholder=p(),et("add"),e.preventDefault(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),ei="",en=!0,wcvaAudioRecorder.clear(),wcvaAudioRecorder.record(z),!0===wcvaClientInfo.ios){a();R.classList.contains("wcva-hide-element")||(window.wcvaIosMicTimeoutIdentifier=setTimeout(function(){c(R,q,!0)},4e3))}n(),window.wcvaMicTimeoutIdentifier=setTimeout(function(){let e=z.classList;e&&e.contains("listening")&&z.click()},r)}(!0===wcvaClientInfo.ios||wcvaClientInfo.safari&&!wcvaClientInfo.chrome&&!wcvaClientInfo.firefox&&!wcvaClientInfo.edge||wcvaClientInfo.windows&&wcvaClientInfo.firefox)&&(wcvaIntentResponsePlayer.configure(wcvaSilenceSoundPath),wcvaIntentResponsePlayer.play()),!0!==u(z.getAttribute("id"),z)&&(wcvaAudioRecorder&&wcvaAudioContext?null===ed()?(r+=5e3,setTimeout(()=>{t()},5e3)):t():null===ed()?(r+=5e3,setTimeout(()=>{wcvaInitAudio(function(e){if(wcvaAudioRecorder&&wcvaAudioContext)t();else{try{k.removeChild(B)}catch(i){}return B.innerHTML=wcvaMessages.micNotAccessible,k.appendChild(B),!1}})},5e3)):wcvaInitAudio(function(e){if(wcvaAudioRecorder&&wcvaAudioContext)t();else{try{k.removeChild(B)}catch(i){}return B.innerHTML=wcvaMessages.micNotAccessible,k.appendChild(B),!1}}))},!1);function er(){return{chatConvoEl:k,userMsgElWrapper:I,userMsgEl:P,simonMsgEl:S,errorMsgEl:B}}function es(e=null){try{if(!k)return!1;let t=k.classList,i=M.classList,n=C.classList;"expand"==e?(t.contains("wcva-hide-element")&&t.remove("wcva-hide-element"),i.contains("wcva-expand-window")&&(i.add("wcva-collapse-window"),i.remove("wcva-expand-window")),n.contains(L)&&(n.remove(L),n.add(y))):"hide"==e?(t.contains("wcva-hide-element")||t.add("wcva-hide-element"),i.contains("wcva-collapse-window")&&(i.remove("wcva-collapse-window"),i.add("wcva-expand-window")),n.contains(y)&&(n.add(L),n.remove(y))):(t.toggle("wcva-hide-element"),i.toggle("wcva-expand-window"),i.toggle("wcva-collapse-window"),n.toggle(y),n.toggle(L)),k.scrollTop=k.scrollHeight,M.classList.contains("wcva-expand-window")?M.setAttribute("title","Click for see all conversions."):M.classList.contains("wcva-collapse-window")&&M.setAttribute("title","Click for hide all conversions.")}catch(a){console.log("WCVA Error: something went wrong while expanding/collapsing a chat window.")}}function ed(){return localStorage.getItem("wcvaSimonIntroduced")}!0==wcvaIsElementor&&function t(){let i=document.getElementById("flt-mic");if(null!=i){let l=i.getElementsByClassName("my-icon-wrapper")[0].getElementsByTagName("i")[0],o=function e(t){let i=0,n=0;t.clientHeight>=80&&(n=-((i=t.clientHeight+15)/6)),n=t.clientHeight>=60?-((i=t.clientHeight+12)/5):t.clientHeight>=30?-((i=t.clientHeight+10)/4):-((i=t.clientHeight+8)/3.5);let a=document.createElement("div");a.setAttribute("id","pulse"),a.setAttribute("class","pulse-color"),a.style.width=i+"px",a.style.height=i+"px",a.style.left=n+"px";let l=document.createElement("div");return l.setAttribute("id","pulse-rate"),l.setAttribute("class","pulse-color"),l.style.width=i+"px",l.style.height=i+"px",l.style.left=n+"px",{wcvaPulse:a,wcvaPulseRate:l}}(l);if("webkitSpeechRecognition"in window&&!0===wcvaClientInfo.chrome){let s=new webkitSpeechRecognition;function d(){if(en=!1,el)return;ei=ea,i.classList.remove("listening"),l.classList.remove("my-icon-animation-wrapper"),l.removeChild(o.wcvaPulse),l.removeChild(o.wcvaPulseRate);let e=wcvaAlternativeResponse.randomLib;wcvaIntentResponsePlayer.configure(e[Math.floor(10*Math.random())],function(){void 0!==ei&&0!=ei.length?(P.innerHTML=ei,k.appendChild(I),j.value=ei,wcvaSendDialog(ei,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{V.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()},er())):j.placeholder=wcvaMessages.ask}),wcvaIntentResponsePlayer.play()}s.continuous=!0,s.interimResults=!0,s.onstart=function(){en=!0},s.onerror=function(e){i.classList.remove("listening"),en=!1,l.classList.remove("my-icon-animation-wrapper"),l.removeChild(o.wcvaPulse),l.removeChild(o.wcvaPulseRate),"no-speech"==e.error&&(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),el=!0,B.innerHTML=wcvaMessages.unableToHear,k.appendChild(B)),"audio-capture"==e.error&&(el=!0,B.innerHTML=wcvaMessages.micNotAccessible,k.appendChild(B)),"not-allowed"==e.error&&(el=!0,B.innerHTML=wcvaMessages.browserDenyMicAccess,k.appendChild(B))},s.onend=function(){wcvaClientInfo.android&&d()},s.onresult=function(e){let t="";if(void 0===e.results){s.onend=null,s.stop(),j.placeholder=wcvaMessages.unableToProcess,wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unableToProcess),wcvaIntentResponsePlayer.play();return}let i=e.results.length;for(let n=e.resultIndex;n<i;++n)e.results[n].isFinal?(ea=e.results[n][0].transcript,!1==wcvaClientInfo.android&&(d(),s.stop())):t+=e.results[n][0].transcript},i.addEventListener(e,function(e){if(!0!==u(i.getAttribute("id"),i)){if(!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey)){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play();return}if(en)n(),j.placeholder=p(),!1==wcvaClientInfo.android&&(d(),s.stop());else{try{k.removeChild(I)}catch(t){}try{k.removeChild(S)}catch(a){}try{k.removeChild(B)}catch(c){}j.placeholder=p(),i.classList.add("listening"),l.classList.add("my-icon-animation-wrapper"),l.appendChild(o.wcvaPulse),l.appendChild(o.wcvaPulseRate),e.preventDefault(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),P.innerHTML=ei="",en=!0,s.lang=wcvaSelectedLang,s.start(),el=!1,n(),window.wcvaMicTimeoutIdentifier=setTimeout(function(){let e=i.classList;e&&e.contains("listening")&&i.click()},r)}}})}else i.addEventListener(e,function(e){function t(){if(!(void 0!==wcva.wcvaXApiKey&&null!==wcva.wcvaXApiKey))return wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.unavailable),wcvaIntentResponsePlayer.play(),!1;if(en){if(n(),!0===wcvaClientInfo.ios){a();R.classList.contains("wcva-hide-element")&&c(R,q)}wcvaAudioRecorder.stop(),wcvaStopAudio(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),i.classList.remove("listening"),l.classList.remove("my-icon-animation-wrapper"),l.removeChild(o.wcvaPulse),l.removeChild(o.wcvaPulseRate),j.placeholder=wcvaMessages.transcribeText,wcvaAudioRecorder.getBuffers(function(e){wcvaSttLanguageContext.gcp.stt?wcvaAudioRecorder.exportMonoWAV(function(e){wcvaAudioRecorder.convertBlobToBase64(e).then(function(e){wcvaGcpStt(e).then(function(e){void 0!==e&&0!=e.length?(P.innerHTML=e,k.appendChild(I),j.value=e,wcvaSendDialog(e,function(e,t=null,i=!1){"function"!=typeof t&&(t=function(){if(!0===i)try{V.submit()}catch(e){console.log("Something went wrong while submitting a form for native search.")}}),wcvaIntentResponsePlayer.configure(e,t),wcvaIntentResponsePlayer.play()},er())):(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),j.placeholder=wcvaMessages.ask)})}).catch(function(e){wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),j.placeholder=wcvaMessages.ask})}):(wcvaIntentResponsePlayer.configure(wcvaAlternativeResponse.notAudible),wcvaIntentResponsePlayer.play(),j.placeholder=wcvaMessages.ask)}),en=!1;return}try{k.removeChild(I)}catch(t){}try{k.removeChild(S)}catch(s){}try{k.removeChild(B)}catch(d){}if(j.placeholder=p(),i.classList.add("listening"),l.classList.add("my-icon-animation-wrapper"),l.appendChild(o.wcvaPulse),l.appendChild(o.wcvaPulseRate),e.preventDefault(),wcvaIntentResponsePlayer.isPlaying()&&wcvaIntentResponsePlayer.stop(),ei="",en=!0,wcvaAudioRecorder.clear(),wcvaAudioRecorder.record(i),!0===wcvaClientInfo.ios){a();R.classList.contains("wcva-hide-element")||(window.wcvaIosMicTimeoutIdentifier=setTimeout(function(){c(R,q,!0)},4e3))}n(),window.wcvaMicTimeoutIdentifier=setTimeout(function(){let e=i.classList;e&&e.contains("listening")&&i.click()},r)}(!0===wcvaClientInfo.ios||wcvaClientInfo.safari&&!wcvaClientInfo.chrome&&!wcvaClientInfo.firefox&&!wcvaClientInfo.edge||wcvaClientInfo.windows&&wcvaClientInfo.firefox)&&(wcvaIntentResponsePlayer.configure(wcvaSilenceSoundPath),wcvaIntentResponsePlayer.play()),!0!==u(i.getAttribute("id"),i)&&(wcvaAudioRecorder&&wcvaAudioContext?t():wcvaInitAudio(function(e){if(wcvaAudioRecorder&&wcvaAudioContext)t();else{try{k.removeChild(B)}catch(i){}return B.innerHTML=wcvaMessages.micNotAccessible,k.appendChild(B),!1}}))},!1)}}(),X.addEventListener("mouseover",function(e){X.title=p()})}()};
